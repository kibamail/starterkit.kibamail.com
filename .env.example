# =============================================================================
# ENVIRONMENT VARIABLES
# =============================================================================
#
# Copy this file to .env and fill in the values.
# All variables defined here are validated at application startup.
#
# See env/schema.ts for full documentation and validation rules.
#

# =============================================================================
# APPLICATION ENVIRONMENT
# =============================================================================

# The current environment (development, production, or test)
# This affects security settings and behavior throughout the app
NODE_ENV=development

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL connection string
# Format: postgresql://[user[:password]@][host][:port][/dbname][?params]
#
# Example for local development:
# DATABASE_URL="postgresql://postgres:password@localhost:5432/myapp"
#
# Example for production (using connection pooling):
# DATABASE_URL="postgresql://user:pass@host.com:5432/db?schema=public&connection_limit=5"
DATABASE_URL="postgresql://postgres:password@localhost:5432/myapp"

# =============================================================================
# LOGTO AUTHENTICATION CONFIGURATION
# =============================================================================
#
# Logto is an open-source authentication service that provides:
# - User management and authentication
# - Social login providers (Google, GitHub, etc.)
# - Multi-factor authentication (MFA)
# - Role-based access control (RBAC)
#
# Setup instructions:
# 1. Create a free account at https://logto.io or self-host
# 2. Create a new application in the Logto Console
# 3. Copy the credentials below from your application settings
# 4. Configure redirect URIs in Logto Console to match your base URL
#
# Documentation: https://docs.logto.io/docs/recipes/integrate-logto/next-js/
# =============================================================================

# Logto Tenant ID
# Find this in: Logto Console ‚Üí Tenant Settings
# This is the unique identifier for your Logto tenant
#
# Example: nol94f
LOGTO_TENANT_ID="your-tenant-id-here"

# Logto instance endpoint URL
# Find this in: Logto Console ÔøΩ Settings ÔøΩ Endpoint
# Must use HTTPS in production for security
#
# Example: https://your-tenant.logto.app/
LOGTO_ENDPOINT="https://nol94f.logto.app/"

# Application ID from Logto Console
# Find this in: Logto Console ÔøΩ Applications ÔøΩ Your App ÔøΩ App Info ÔøΩ App ID
# This identifies your application to the Logto service
#
# Example: x1cozc7rcq25in9zyfakw
LOGTO_APP_ID="your-app-id-here"

# Application Secret from Logto Console
# Find this in: Logto Console ÔøΩ Applications ÔøΩ Your App ÔøΩ App Secret
#
# ÔøΩ SECURITY: Keep this secret! Never commit it to version control.
# - Treat this like a password
# - Rotate immediately if compromised
# - Use different secrets for each environment (dev/staging/prod)
#
# Example: ZlfTyv4b0I2lWolNmSFAxKin2HT9Ftgn
LOGTO_APP_SECRET="your-app-secret-here"

# Your application's base URL
# This is where Logto will redirect users after authentication
# Must match the redirect URI configured in Logto Console exactly
#
# Configure in: Logto Console ÔøΩ Applications ÔøΩ Your App ÔøΩ Redirect URIs
# Add these URIs:
# - http://localhost:18090/api/logto/sign-in-callback (development)
# - http://localhost:18090/api/logto/sign-out-callback (development)
# - https://yourdomain.com/api/logto/sign-in-callback (production)
# - https://yourdomain.com/api/logto/sign-out-callback (production)
#
# Development (using port 18090):
LOGTO_BASE_URL="http://localhost:18090"
#
# Production example:
# LOGTO_BASE_URL="https://yourdomain.com"

# Cookie encryption secret (exactly 32 characters)
# Used to encrypt session cookies for security
#
# Generate a secure random secret using one of these commands:
#
# Using OpenSSL:
#   openssl rand -base64 32 | head -c 32
#
# Using Node.js:
#   node -e "console.log(require('crypto').randomBytes(32).toString('base64').slice(0, 32))"
#
# ÔøΩ SECURITY REQUIREMENTS:
# - Must be exactly 32 characters
# - Use a cryptographically secure random generator
# - Different secret for each environment (dev/staging/prod)
# - Never commit to version control
# - Rotating this will log out all users
#
# Example: itxd3l3ji6zo7VQbZK8EHNAv86hcDb9U
LOGTO_COOKIE_SECRET="your-32-character-secret-here"

# Cookie secure flag (true or false)
# Determines if session cookies should only be sent over HTTPS
#
# Security recommendations:
# - Development: "false" (allows http://localhost)
# - Production: "true" (requires HTTPS for security)
#
# When set to "true", cookies are only sent over HTTPS connections,
# preventing man-in-the-middle attacks and cookie theft.
#
# This defaults automatically based on NODE_ENV if not set:
# - development: false
# - production: true
LOGTO_COOKIE_SECURE="false"

# =============================================================================
# LOGTO MANAGEMENT API (M2M) CONFIGURATION
# =============================================================================
#
# Machine-to-Machine credentials for accessing Logto Management API.
# Required for programmatic operations like creating organizations,
# managing members, and assigning roles.
#
# Setup Instructions:
# 1. Go to Logto Console ‚Üí Applications ‚Üí Create Application
# 2. Select "Machine-to-machine" application type
# 3. Assign the "Logto Management API access" role to the app
# 4. Copy the App ID and App Secret from the application details
#
# ‚ö†Ô∏è SECURITY:
# - These credentials provide full admin access to your Logto tenant
# - Never commit real values to version control
# - Never expose in client-side code
# - Rotate immediately if compromised
#
# @see https://docs.logto.io/integrate-logto/interact-with-management-api
# @see https://docs.logto.io/quick-starts/m2m
# =============================================================================

# M2M Application ID
# Find this in: Logto Console ‚Üí Applications ‚Üí Your M2M App ‚Üí App Info
#
# @example "m2m_abc123def456"
LOGTO_M2M_APP_ID="your-m2m-app-id-here"

# M2M Application Secret
# Find this in: Logto Console ‚Üí Applications ‚Üí Your M2M App ‚Üí App Secret
#
# ‚ö†Ô∏è CRITICAL: This grants full admin access to Logto Management API
# - Can create/delete organizations
# - Can assign/revoke user roles
# - Can manage all tenant resources
#
# @example "secret_xyz789abc123def456ghi789"
LOGTO_M2M_APP_SECRET="your-m2m-app-secret-here"

# =============================================================================
# OPTIONAL: SKIP VALIDATION
# =============================================================================
#
# Set to "true" to skip environment validation during build
# Useful for Docker builds where env vars are injected at runtime
#
# ÔøΩ WARNING: Never use this in production!
#
# SKIP_ENV_VALIDATION="false"

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
#
# Redis is used for caching, session storage, and queue management.
# Configure connection details for your Redis instance.
#
# Documentation: https://redis.io/docs/
# =============================================================================

# Redis Host
# The hostname or IP address where Redis is running
#
# Common values:
# - Development (Docker): redis
# - Development (local): localhost
# - Production: redis.yourdomain.com or IP address
#
# @example "redis"
REDIS_HOST="redis"

# Redis Port
# The port number where Redis is listening
# Standard Redis port is 6379
#
# @example "6379"
REDIS_PORT="6379"

# Redis Password
# Password for authenticating with Redis
# Use a strong password in production
#
# Generate a secure password using:
#   openssl rand -base64 32
#
# SECURITY:
# - Use a strong password in production
# - Never commit to version control
# - Rotate periodically
#
# @example "password"
REDIS_PASSWORD="password"

# Redis Database
# Redis database number to use (0-15)
# Different databases can be used to isolate data
#
# @example "0"
REDIS_DATABASE="0"

# =============================================================================
# OUTPOST WEBHOOK DELIVERY CONFIGURATION
# =============================================================================
#
# Hookdeck Outpost is an open-source webhook delivery service that provides:
# - Reliable webhook delivery with automatic retries
# - Webhook event logging and monitoring
# - Rate limiting and throttling
# - Request signing and verification
#
# These credentials secure the Outpost services and are used for:
# - API authentication between your app and Outpost
# - JWT signing for secure API requests
# - Encryption of sensitive webhook data
#
# Documentation: https://hookdeck.com/docs/outpost
# =============================================================================

# Outpost API URL
# The base URL where the Outpost API service is accessible
# Used by Next.js to communicate with Outpost for webhook delivery
#
# Common values:
# - Development (Docker): http://localhost:3333
# - Production: https://outpost.yourdomain.com
#
# @example "http://localhost:3333"
OUTPOST_API_URL="http://localhost:3333"

# API Key for authenticating requests to Outpost
# This key is used by both the Outpost services and your Next.js application
# to securely communicate with the webhook delivery system
#
# Generate a secure random key using:
#   openssl rand -base64 32
#
# SECURITY:
# - Keep this secret and never commit to version control
# - Use different keys for each environment (dev/staging/prod)
# - Rotate immediately if compromised
#
# @example "base64-encoded-random-string-here"
OUTPOST_API_KEY="your-outpost-api-key-here"

# JWT Secret for signing API tokens
# Used by Outpost to sign and verify JWT tokens for authenticated requests
#
# Generate a secure random secret using:
#   openssl rand -base64 32
#
# SECURITY:
# - Must be a strong random string
# - Rotating this will invalidate all existing JWT tokens
#
# @example "another-base64-encoded-random-string"
OUTPOST_API_JWT_SECRET="your-jwt-secret-here"

# AES Encryption Secret for encrypting sensitive data
# Used by Outpost to encrypt webhook payloads and other sensitive information
#
# Generate a secure random secret using:
#   openssl rand -base64 32
#
# SECURITY:
# - Must be a strong random string
# - Rotating this will make encrypted data unreadable
# - Never expose this value in client-side code
#
# @example "yet-another-base64-encoded-random-string"
OUTPOST_AES_ENCRYPTION_SECRET="your-encryption-secret-here"

# =============================================================================
# OUTPOST REDIS CONFIGURATION
# =============================================================================
#
# Redis configuration specifically for Outpost services.
# These are used by the Outpost Docker containers (not by Next.js).
# Use a different database than the main application to isolate data.
#
# =============================================================================

# Outpost Redis Host
# Redis hostname for Outpost services
#
# @example "redis"
OUTPOST_REDIS_HOST="redis"

# Outpost Redis Port
# Redis port for Outpost services
#
# @example "6379"
OUTPOST_REDIS_PORT="6379"

# Outpost Redis Password
# Redis password for Outpost services
# Should match the main REDIS_PASSWORD or use a different Redis instance
#
# @example "password"
OUTPOST_REDIS_PASSWORD="password"

# Outpost Redis Database
# Redis database number for Outpost services (0-15)
# Use a different database than the main application to isolate data
#
# @example "1"
OUTPOST_REDIS_DATABASE="1"
